<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive UR5e Kinematics Visualization - Mo Saeidi</title>
    <meta name="description" content="Explore UR5e forward kinematics interactively. Adjust joint angles using sliders and see the robot configuration and end-effector pose update in real-time 3D.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../assets/css/base.css" />
    <link rel="stylesheet" href="../assets/css/layout.css" />
    <link rel="stylesheet" href="../assets/css/components/navbar.css" />
    <link rel="stylesheet" href="../assets/css/components/buttons.css" />
    <link rel="stylesheet" href="../assets/css/components/footer.css" />
    <link rel="stylesheet" href="../assets/css/pages/post.css" />

    <style>
        .interactive-kinematics-container {
            display: flex;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: 2rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
            background-color: var(--background-alt); /* Match theme */
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #kinematics-visualization {
            flex: 2; /* Takes more space */
            min-width: 300px; /* Minimum width for the canvas */
            min-height: 400px; /* Minimum height */
            background-color: #2d3748; /* Darker background for contrast */
            border-radius: var(--border-radius);
            position: relative; /* Needed for potential overlays */
            overflow: hidden; /* Clip content */
        }
         #kinematics-visualization canvas {
             display: block; /* Remove extra space below canvas */
             width: 100% !important;
             height: 100% !important;
         }


        .controls-panel {
            flex: 1; /* Takes less space */
            min-width: 250px; /* Minimum width for controls */
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .slider-container label {
            font-size: 0.85rem;
            color: var(--text-muted);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
         .slider-container label .value-display {
             font-weight: 500;
             color: var(--text-primary);
             background-color: var(--background-code);
             padding: 0.1rem 0.4rem;
             border-radius: 4px;
             font-family: 'Roboto Mono', monospace;
             font-size: 0.8rem;
         }


        .slider-container input[type="range"] {
            width: 100%;
            cursor: pointer;
            accent-color: var(--primary-color); /* Style slider thumb/track */
        }

        /* Style range sliders for better theme consistency */
        input[type="range"] {
            -webkit-appearance: none; /* Override default look */
            appearance: none;
            width: 100%;
            height: 8px; /* Track height */
            background: var(--background-alt-2); /* Track background */
            border-radius: 5px;
            outline: none;
            opacity: 0.9;
            transition: opacity .2s;
        }

        input[type="range"]:hover {
            opacity: 1;
        }

        /* Thumb styles - Webkit */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px; /* Thumb width */
            height: 18px; /* Thumb height */
            background: var(--primary-color); /* Thumb color */
            border-radius: 50%;
            cursor: pointer;
        }

        /* Thumb styles - Firefox */
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Remove default border */
        }

        .pose-display {
             margin-top: 1rem;
             padding: 0.8rem;
             background-color: var(--background-code);
             border-radius: var(--border-radius);
             font-family: 'Roboto Mono', monospace;
             font-size: 0.8rem;
             line-height: 1.4;
             color: var(--text-muted);
             white-space: pre-wrap; /* Allow wrapping */
             word-break: break-all; /* Break long strings */
        }
         .pose-display strong {
             color: var(--text-primary);
             font-weight: 500;
         }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            .interactive-kinematics-container {
                flex-direction: column; /* Stack elements vertically */
            }
             #kinematics-visualization {
                 min-height: 350px; /* Adjust height */
             }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header class="header">
            <nav class="navbar">
                <div class="container">
                    <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="Toggle Menu" aria-expanded="false">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                    <ul class="nav-links">
                        <li><a href="../index.html">MoSa</a></li>
                        <li><a href="../projects.html">Projects</a></li>
                        <li><a href="../blog.html">Blog</a></li>
                        <li><a href="../academia.html">Academia</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <main class="main-content">
            <div class="container post-container">
                <article>
                    <header class="post-header">
                        <div class="post-meta">
                            <span class="post-category">Robotics & Visualization</span>
                            <time datetime="2025-04-27">April 27, 2025</time>
                        </div>
                        <h1 class="post-title">Interactive UR5e Kinematics Visualization</h1>
                    </header>

                    <section class="post-content">
                        <p>
                            Understanding robot kinematics – the relationship between joint angles and the position/orientation of the end-effector (TCP) – is fundamental in robotics. This interactive visualization demonstrates the Forward Kinematics (FK) of a UR5e robot arm in real-time 3D.
                        </p>

                        <h2>Forward Kinematics (FK)</h2>
                        <p>
                            Forward Kinematics calculates the final position and orientation of the robot's TCP given the angles of each of its joints. We use the Denavit-Hartenberg (DH) parameters specific to the UR5e to construct transformation matrices for each joint. Multiplying these matrices together gives the overall transformation from the robot's base to its TCP.
                        </p>
                        <p>
                            <strong>Try it yourself!</strong> Use the sliders below to adjust the angle (in radians) for each of the UR5e's six joints (q1 to q6). Observe how the robot's configuration changes in the 3D view and how the calculated TCP pose updates.
                        </p>

                        <div class="interactive-kinematics-container">
                            <div id="kinematics-visualization">
                                </div>
                            <div class="controls-panel">
                                <h3>Joint Angles (radians)</h3>
                                <div class="slider-container">
                                    <label for="q1">Joint 1 (q1): <span class="value-display" id="q1-value">0.00</span></label>
                                    <input type="range" id="q1" name="q1" min="-3.14159" max="3.14159" step="0.01" value="0">
                                </div>
                                <div class="slider-container">
                                    <label for="q2">Joint 2 (q2): <span class="value-display" id="q2-value">-1.57</span></label>
                                    <input type="range" id="q2" name="q2" min="-3.14159" max="3.14159" step="0.01" value="-1.5708">
                                </div>
                                <div class="slider-container">
                                    <label for="q3">Joint 3 (q3): <span class="value-display" id="q3-value">1.57</span></label>
                                    <input type="range" id="q3" name="q3" min="-3.14159" max="3.14159" step="0.01" value="1.5708">
                                </div>
                                <div class="slider-container">
                                    <label for="q4">Joint 4 (q4): <span class="value-display" id="q4-value">-1.57</span></label>
                                    <input type="range" id="q4" name="q4" min="-3.14159" max="3.14159" step="0.01" value="-1.5708">
                                </div>
                                <div class="slider-container">
                                    <label for="q5">Joint 5 (q5): <span class="value-display" id="q5-value">-1.57</span></label>
                                    <input type="range" id="q5" name="q5" min="-3.14159" max="3.14159" step="0.01" value="-1.5708">
                                </div>
                                <div class="slider-container">
                                    <label for="q6">Joint 6 (q6): <span class="value-display" id="q6-value">0.00</span></label>
                                    <input type="range" id="q6" name="q6" min="-3.14159" max="3.14159" step="0.01" value="0">
                                </div>
                                <div class="pose-display" id="tcp-pose-display">
                                    <strong>Calculated TCP Pose (T0_TCP):</strong>
                                    [Loading...]
                                </div>
                            </div>
                        </div>
                        <h2>Inverse Kinematics (IK)</h2>
                        <p>
                            Inverse Kinematics is the opposite problem: given a desired TCP pose (position and orientation), what are the joint angles required to achieve it? For a 6-DOF robot like the UR5e, there can be multiple valid joint configurations (often up to 8) that result in the same TCP pose. This is because of the robot's redundant nature for certain tasks.
                        </p>
                        <p>
                            While this visualization focuses on FK, the calculated TCP pose shown above represents a <em>target</em> pose that could potentially be reached by several different sets of joint angles found through IK. The Python code this visualization is based on includes an analytical IK solver that finds these multiple solutions. Implementing a robust analytical IK solver directly in JavaScript is significantly more complex, but the principle remains important: a single target pose doesn't necessarily map back to a unique robot configuration.
                        </p>

                        <h2>Implementation Details</h2>
                        <p>
                            This interactive visualization uses <a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">Three.js</a> for the 3D rendering. The forward kinematics logic, adapted from the provided Python script (<code>ur5e_ik_solver.py</code>), is implemented in JavaScript (<code>interactive-kinematics.js</code>). The robot model is built using simple geometric primitives (cylinders and spheres) transformed according to the calculated FK matrices. The sliders allow direct manipulation of the joint angles, triggering recalculations and scene updates.
                        </p>
                        <p>
                            The DH parameters and TCP offset used match the standard UR5e configuration.
                        </p>

                        <hr>
                        <p><em>Explore the code, experiment with the sliders, and feel free to connect via the <a href="../academia.html#contact-simplified">contact form</a> or <a href="https://www.linkedin.com/in/mo-saeidi-21a00015a/" target="_blank">LinkedIn</a> with any questions.</em></p>
                    </section>
                </article>

                <a href="../blog.html" class="back-to-blog"><i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Blog List</a>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>&copy; <span id="current-year"></span> Mo Saeidi. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>


    <script src="../assets/js/main.js"></script>
    <script type="module" src="../assets/js/pages/interactive-kinematics.js"></script>
</body>
</html>
